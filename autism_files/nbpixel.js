// Newsbreak Pixel v1.0.0 | MIT License
!function(i,s,n){"use strict";function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}var p={id:"",params:{},version:20250813144703,buildTime:"Wed Aug 13 2025 14:47:04 GMT-0700 (Pacific Daylight Time)"},g=function(){function t(){c(this,t)}return d(t,null,[{key:"isPresent",value:function(e){return null!=e&&""!==e}},{key:"now",value:function(){return+new Date}},{key:"guid",value:function(){return p.version+"-xxxxxxxx-".replace(/[x]/g,function(e){var t=36*Math.random()|0;return("x"==e?t:3&t|8).toString(36)})+(+new Date).toString(36)}},{key:"optionalData",value:function(e){return!1===t.isPresent(e)?"":"object"===u(e)?t.optionalData(JSON.stringify(e)):"function"==typeof e?t.optionalData(e()):String(e)}},{key:"hashToBucket",value:function(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n)>>>0;return t%100+1}}]),t}(),e=function(){function e(){c(this,e)}return d(e,null,[{key:"nameAndVersion",value:function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))}},{key:"isMobile",value:function(){return"ontouchstart"in s}},{key:"userAgent",value:function(){return i.navigator.userAgent}}]),e}(),y=function(){function e(){c(this,e)}return d(e,null,[{key:"prefix",value:function(){return"__".concat("nbpix","_")}},{key:"set",value:function(e,t,n,r){var i,o=3<arguments.length&&void 0!==r?r:"/",a="";g.isPresent(n)&&((i=new Date).setTime(i.getTime()+60*n*1e3),a="expires=".concat(i.toGMTString(),"; ")),s.cookie="".concat(this.prefix()).concat(e,"=").concat(t,"; ").concat(a,"path=").concat(o,"; SameSite=Lax; domain=").concat(location.hostname.split(".").slice(-2).join("."))}},{key:"get",value:function(e){for(var e="".concat(this.prefix()).concat(e,"="),t=s.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}}},{key:"delete",value:function(e){this.set(e,"",-100)}},{key:"exists",value:function(e){return g.isPresent(this.get(e))}},{key:"setUtms",value:function(){for(var e=["utm_source","utm_medium","utm_term","utm_content","utm_campaign"],t=!1,n=0,r=e.length;n<r;n++)if(g.isPresent(h.getParameterByName(e[n]))){t=!0;break}if(t){for(var i,o={},n=0,r=e.length;n<r;n++)i=h.getParameterByName(e[n]),g.isPresent(i)&&(o[e[n]]=i);this.set("utm",JSON.stringify(o))}}},{key:"getUtm",value:function(e){if(this.exists("utm")){var t=JSON.parse(this.get("utm"));return e in t?t[e]:""}}},{key:"setNbs",value:function(){for(var e=["nb_aid","nb_fid","nb_cid","esourceid","csource","siteid","ccreative","cname","placement_id","placement_name","icode","promo","uid_01","uid_02","uid_03","uid_04","uid_05","uid_06","uid_07","uid_08"],t=!1,n=0,r=e.length;n<r;n++)if(g.isPresent(h.getParameterByName(e[n]))){t=!0;break}if(t){for(var i,o={},n=0,r=e.length;n<r;n++)i=h.getParameterByName(e[n]),g.isPresent(i)&&(o[e[n]]=i);this.set("nb",JSON.stringify(o))}}},{key:"getNb",value:function(e){if(this.exists("nb")){var t=JSON.parse(this.get("nb"));return e in t?t[e]:""}}},{key:"setNbLongTime",value:function(){for(var e=["nn_uid"],t=!1,n=0,r=e.length;n<r;n++)if(g.isPresent(h.getParameterByName(e[n]))){t=!0;break}if(t){for(var i,o={},n=0,r=e.length;n<r;n++)i=h.getParameterByName(e[n]),g.isPresent(i)&&(o[e[n]]=i);this.set("nb_long",JSON.stringify(o),1051200)}}},{key:"getNbLongTime",value:function(e){if(this.exists("nb_long")){var t=JSON.parse(this.get("nb_long"));return e in t?t[e]:""}}}]),e}();a(y,"set3rdPartyCookie",function(){var e=s.createElement("iframe");e.id="nbu-iframe",e.style.display="none",e.src="https://id-msp.newsbreak.com/sync-nbu?source=2&host="+i.location.hostname,s.body.appendChild(e)}),a(y,"getFirstParty",function(){try{var e,t=["_fbp","_ga"],n={},r=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}(s.cookie.split("; "));try{for(r.s();!(e=r.n()).done;){var i,o=f(e.value.split("="),2),a=o[0],u=o[1];t.includes(a)&&(i=decodeURIComponent(u),n[a]=i)}}catch(e){r.e(e)}finally{r.f()}if(!Object.keys(n).length)return"";var c=JSON.stringify(n);return btoa(c)}catch(e){return console.log("fpc error",e),""}});var h=function(){function e(){c(this,e)}return d(e,null,[{key:"getParameterByName",value:function(e,t){t=t||i.location.href,e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}},{key:"externalHost",value:function(e){return e.hostname!=location.hostname&&0===e.protocol.indexOf("http")}}]),e}(),b=function(){function r(e,t,n){c(this,r),this.paramsMap={},this.event=e,this.timestamp=t,this.optional=g.optionalData(n),this.buildParams(),this.send()}return d(r,[{key:"buildParams",value:function(){var e=this.getAttribute();for(var t in e)e.hasOwnProperty(t)&&this.setParam(t,e[t](t))}},{key:"getAttribute",value:function(){var t=this;return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({id:function(){return p.id},uid:function(){return y.get("uid")},ev:function(){return t.event},ed:function(){return t.optional},v:function(){return p.version},dl:function(){return i.location.href},rl:function(){return s.referrer},ts:function(){return t.timestamp},de:function(){return s.characterSet},sr:function(){return i.screen.width+"x"+i.screen.height},vp:function(){return i.innerWidth+"x"+i.innerHeight},cd:function(){return i.screen.colorDepth},dt:function(){return s.title},bn:function(){return e.nameAndVersion()},md:function(){return e.isMobile()},ua:function(){return e.userAgent()},tz:function(){return(new Date).getTimezoneOffset()},utm_source:function(e){return y.getUtm(e)},utm_medium:function(e){return y.getUtm(e)},utm_term:function(e){return y.getUtm(e)},utm_content:function(e){return y.getUtm(e)},utm_campaign:function(e){return y.getUtm(e)},nb_aid:function(e){return y.getNb(e)},nb_fid:function(e){return y.getNb(e)},nb_cid:function(e){return y.getNb(e)},nn_uid:function(e){return y.getNbLongTime(e)},fpc:function(){return y.getFirstParty()},duration_ms:function(){var e=t.timestamp-n.t;return"number"!=typeof e||isNaN(e)?"":e}},p.params)}},{key:"setParam",value:function(e,t){g.isPresent(t)?this.paramsMap[e]=String(t):this.paramsMap[e]=""}},{key:"send",value:function(){i.navigator.sendBeacon?this.sendBeacon():this.sendFetch()}},{key:"sendBeacon",value:function(){i.navigator.sendBeacon(this.getSourceUrl(),JSON.stringify(this.paramsMap))}},{key:"sendFetch",value:function(){fetch(this.getSourceUrl(),{method:"POST",body:JSON.stringify(this.paramsMap),mode:"no-cors",credentials:"include"})}},{key:"getSourceUrl",value:function(){return"https://business.newsbreak.com/tracking/pixelv2"}}]),r}();y.exists("uid")?y.set("uid",y.get("uid"),1051200):y.set("uid",g.guid(),1051200),y.set3rdPartyCookie(),y.setUtms(),y.setNbs(),y.setNbLongTime();function t(){p.setUpOnce=!0,n.t||(n.t=g.now()),n.process=function(e,t,n,r){"init"===e?(p.id=t,p.initOnce||(p.initOnce=!0,new b("pixelinit",g.now(),n),"function"==typeof r&&r("pixelinit"))):"param"===e?p.params[t]=function(){return n}:"event"===e&&("pageload"!==t||p.pageLoadOnce?"pageload"!==t&&"pageclose"!==t&&new b(t,g.now(),n):(p.pageLoadOnce=!0,new b(t,g.now(),n)))};for(var e=0,t=n.queue.length;e<t;e++)n.process.apply(n,n.queue[e]);i.addEventListener("unload",function(){p.pageCloseOnce||(p.pageCloseOnce=!0,new b("pageclose",g.now(),function(){if(g.isPresent(p.externalHost)&&g.now()-p.externalHost.time<5e3)return p.externalHost.link}))}),i.onload=function(){for(var e=s.getElementsByTagName("a"),t=0,n=e.length;t<n;t++)e[t].addEventListener("click",function(e){h.externalHost(this)&&(p.externalHost={link:this.href,time:g.now()})}.bind(e[t]));for(var r=s.querySelectorAll("[data-nbpix-event]"),t=0,n=r.length;t<n;t++)r[t].addEventListener("click",function(e){var t=this.getAttribute("data-nbpix-event");t&&new b(t,g.now(),this.getAttribute("data-nbpix-data"))}.bind(r[t]))}}s.getElementById("nbu-iframe").addEventListener("load",function(){p.setUpOnce||t()}),setTimeout(function(){p.setUpOnce||t()},500)}(window,document,window.nbpix);